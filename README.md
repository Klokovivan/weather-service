APP с микросервисной архитектурой для получения информаии о погоде | WEATHER-SERVICE

Стек: Python 3.8 | FastAPI | Docker

Принцип работы:

В микросервис weather_service отправляется запрос "город", при получении города например "Moscow" он отправляется на микросервис geocoding_service для преобразования города в координаты,
далее координаты отправляются в JSON формате обратно на weather_service и отправляют запрос о погоде на openweathermap.org далее принимаются и возвращаются пользователю

В приложении реализовано: 

1. Middleware - проверка токена
2. Кэширование внутри памяти python
3. Логгирование ошибок в файл log
4. Статус-код


Инструкция по эксплуатации:

Чтобы запустить приложение на локальном хосте Docker необходимо:

1. Запустить докер
2. В терминал написать команду: docker-compose up (смонтируется локальный хост)
3. Переходим на http://localhost:8002/
4. Открываем документацию /docs
7. Попадаем в FastAPI
8. Разворачиваем /GET WEATHER
9. Вводим City: Moscow (любой города на любом языке)
10. Вводим x-token: weather_service_token


Получаем ответ:
{
  "celsius": 31.04,
  "fahrenheit": 87.872,
  "kelvin": 304.19
}


Тестовое задание:

Backend
Задача:
Необходимо написать приложение с использованием микросервисной архитектуры для получения информации о погоде из https://openweathermap.org/price. Для разработке можно использовать free тарифный план. Решение должно содержать:
Исходный код сервисов
Файл docker-compose.yml для сборки
 
Стек:
1. 	Python 3.6+
2. 	FastAPI
3. 	Docker
 
Список сервисов:
Сервис для получения погоды.
Сервис для преобразования название города в координаты.
В зависимости от реализации возможно понадобятся еще сервисы.
 
 
Сценарий работы со стороны клиента:
 
Клиент отправляет запрос который содержит координаты местности или названия города.
В ответ получает информацию о текущей погоде в:
Градусах  Цельсия.
Градусах Фаренгейта.
Градусах Кельвина
Формат ответа JSON.
 
Сценарий работы со стороны сервисов:
«Сервис для получения погоды»
              	На вход получает название города или координаты точки. Если передано название города, необходимо сделать запрос в сервис «Сервис для преобразования название города в координаты» получить оттуда координаты, после чего из сервиса https://openweathermap.org/current запросить погоду. Из полученных данных сформировать и вернуть ответ клиенту.
 
«Сервис для преобразования название города в координаты»
              	На вход получаем название города, запрашиваем координаты https://openweathermap.org/api/geocoding-api. Из полученных данных сформировать и вернуть ответ клиенту.
 
Общие требования
1. 	Для всех роутов необходимо предусмотреть middleware с проверкой токена из заголовка запроса. Для каждого сервиса токен должен быть свой.
2. 	Все ошибки необходимо логировать (например в текстовый файл).
3. 	Необходимо предусмотреть кеширования данных, чтобы избежать излишних запросов и нагрузки на сервер. При этом учесть, чтобы время кеширование не приводило к получению неактуальных данных.
4. 	Все данные полученный от клиента необходимо валидировать ( как минимум по типу). Сервис для получения погоды для сервиса для преобразования название города в координаты является клиентом.
5. 	Код ответа должен соответствовать содержанию ответа. Например код 200 — запрос успешно выполнен. Код 401 — ошибка авторизации.
 
Может быть полезно:
https://openweathermap.org/price
https://openweathermap.org/api/geocoding-api
https://openweathermap.org/current
https://habr.com/ru/companies/ruvds/articles/450312/
https://pypi.org/project/fastapi-cache2/
